<div class="modal-header">
  <b class="modal-title display-6">Project Editor</b>
</div>
<div class="modal-body" *ngIf="finished">
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Project Title</h5>
      <input class="form-control" type="text" [(ngModel)]="project.title">
    </div>
  </div>

  <div class="card mt-2" *ngIf="project.authors.length > 0">
    <div class="card-body">
      <h5 class="card-title">Authorship</h5>
      <div class="row">
        <div class="col-3" *ngFor="let a of project.authors; let ind = index">
          <div class="form-group">
            <label>Author Name</label>
            <input type="text" class="form-control" [(ngModel)]="a.name">
          </div>
          <div class="form-group">
            <label>Author Contact Information</label>
            <input type="text" class="form-control" [(ngModel)]="a.contact">
          </div>
          <div class="form-check">
            <input type="checkbox" class="form-check-input" [(ngModel)]="a.first">
            <label class="form-check-label">First author</label>
          </div>
        </div>
      </div>
    </div>
    <div class="card-footer">
      <button class="btn btn-sm btn-primary" (click)="addAuthor()">+</button>
    </div>
  </div>

  <div class="card mt-2">
    <div class="card-body">
      <h5 class="card-title">Collaborators</h5>
      <div class="row">
        <div class="col-3" *ngFor="let a of project.collaborators; let ind = index">
          <div class="form-group">
            <label>Collaborator Name</label>
            <input type="text" class="form-control" [(ngModel)]="a.name">
          </div>
          <div class="form-group">
            <label>Collaborator Contact Information</label>
            <input type="text" class="form-control" [(ngModel)]="a.contact">
          </div>
        </div>
      </div>
    </div>
    <div class="card-footer">
      <button class="btn btn-sm btn-primary" (click)="addCollaborator()">+</button>
    </div>
  </div>
  <div class="card mt-2">
    <div class="card-body">
      <h5 class="card-title">PIs</h5>
      <div class="row">
        <div class="col-3" *ngFor="let a of project.pis; let ind = index">
          <div class="form-group">
            <label>PI Name</label>
            <input type="text" class="form-control" [(ngModel)]="a.name">
          </div>
          <div class="form-group">
            <label>PI Contact Information</label>
            <input type="text" class="form-control" [(ngModel)]="a.contact">
          </div>
        </div>
      </div>
    </div>
    <div class="card-footer">
      <button class="btn btn-sm btn-primary" (click)="addPI()">+</button>
    </div>
  </div>
  <div class="card mt-2">
    <div class="card-body">
      <h5 class="card-title">Additional data</h5>
      <div class="row">
        <div class="col-3">
          <label for="experimentType">Experiment Types</label>
          <select id="experimentType" class="form-control" [(ngModel)]="project.experimentType">
            <option *ngFor="let o of experimentTypes" [value]="o">
              {{o}}
            </option>
          </select>
        </div>
        <div class="col-3">
          <label for="keywords">Keywords</label>
          <div class="row">
            <div class="col-8">
              <input id="keywords" #keywords type="text" class="form-control" [(ngModel)]="project.keywords[0].name">
              <small><span class="badge bg-danger" style="margin-left: 2px" *ngFor="let o of project.keywords; let ind = index" (click)="removeValue(ind, 'keywords')">{{o.name}}</span></small>
            </div>
            <div class="col-1">
              <button class="btn btn-sm btn-primary mt-1" (click)="addValue(keywords.value, 'keywords')">+</button>
            </div>
          </div>
        </div>
        <div class="col-3">
          <label for="instruments">Instruments</label>
          <div class="row">
            <div class="col-8">
              <input id="instruments" #instruments type="text" class="form-control" [(ngModel)]="project.instruments[0].name">
              <small><span class="badge bg-danger" style="margin-left: 2px"  *ngFor="let o of project.instruments; let ind = index" (click)="removeValue(ind, 'instruments')">{{o.name}}</span></small>
            </div>
            <div class="col-1">
              <button class="btn btn-sm btn-primary mt-1" (click)="addValue(instruments.value, 'instruments')">+</button>
            </div>
          </div>
        </div>
        <div class="col-3">
          <label for="quantificationMethods">Quantification Methods</label>
          <div class="row">
            <div class="col-8">
              <input id="quantificationMethods" #quantificationMethods type="text" class="form-control" [(ngModel)]="project.quantificationMethods[0].name">
              <small><span class="badge bg-danger" style="margin-left: 2px"  *ngFor="let o of project.quantificationMethods; let ind = index" (click)="removeValue(ind, 'quantificationMethods')">{{o.name}}</span></small>
            </div>
            <div class="col-1">
              <button class="btn btn-sm btn-primary mt-1" (click)="addValue(quantificationMethods.value, 'quantificationMethods')">+</button>
            </div>
          </div>
        </div>
      </div>
      <div class="row mt-2">
        <div class="col-3">
          <label for="organisms">Organisms</label>
          <div class="row">
            <div class="col-8">
              <input id="organisms" #organisms type="text" class="form-control" [(ngModel)]="project.organisms[0].name">
              <small><span class="badge bg-danger" style="margin-left: 2px"  *ngFor="let o of project.organisms; let ind = index" (click)="removeValue(ind, 'organisms')">{{o.name}}</span></small>
            </div>
            <div class="col-1">
              <button class="btn btn-sm btn-primary mt-1" (click)="addValue(organisms.value, 'organisms')">+</button>
            </div>
          </div>
        </div>
        <div class="col-3">
          <label for="tissues">Tissues</label>
          <div class="row">
            <div class="col-8">
              <input id="tissues" #tissues type="text" class="form-control" [(ngModel)]="project.tissues[0].name">
              <small><span class="badge bg-danger" style="margin-left: 2px" *ngFor="let o of project.tissues; let ind = index" (click)="removeValue(ind, 'tissues')">{{o.name}}</span></small>
            </div>
            <div class="col-1">
              <button class="btn btn-sm btn-primary mt-1" (click)="addValue(tissues.value, 'tissues')">+</button>
            </div>
          </div>
        </div>
        <div class="col-3">
          <label for="cellTypes">Cell Types</label>
          <div class="row">
            <div class="col-8">
              <input id="cellTypes" #cellTypes type="text" class="form-control" [(ngModel)]="project.cellTypes[0].name">
              <small><span class="badge bg-danger" style="margin-left: 2px" *ngFor="let o of project.cellTypes; let ind = index" (click)="removeValue(ind, 'cellTypes')">{{o.name}}</span></small>
            </div>
            <div class="col-1">
              <button class="btn btn-sm btn-primary mt-1" (click)="addValue(cellTypes.value, 'cellTypes')">+</button>
            </div>
          </div>
        </div>
        <div class="col-3">
          <label for="diseases">Diseases</label>
          <div class="row">
            <div class="col-8">
              <input id="diseases" #diseases type="text" class="form-control" [(ngModel)]="project.diseases[0].name">
              <small><span class="badge bg-danger" style="margin-left: 2px" *ngFor="let o of project.diseases; let ind = index" (click)="removeValue(ind, 'diseases')">{{o.name}}</span></small>
            </div>
            <div class="col-1">
              <button class="btn btn-sm btn-primary mt-1" (click)="addValue(diseases.value, 'diseases')">+</button>
            </div>
          </div>
        </div>
      </div>
      <div class="row mt-2">
        <div class="col-3">
          <div class="row">
            <label>Project start date</label>
          </div>
          <ngb-datepicker [(ngModel)]="project.date"></ngb-datepicker>
        </div>
        <div class="col-3">
          <div class="form-group">
            <label>Database Version</label>
            <input type="text" class="form-control" [(ngModel)]="project.databaseVersion">
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="card mt-2">
    <div class="card-body">
      <h5 class="card-title">Description</h5>
      <quill-editor [(ngModel)]="project.description"></quill-editor>
    </div>
  </div>
  <div class="card mt-2">
    <div class="card-body">
      <h5 class="card-title">Sample Processing Protocol</h5>
      <quill-editor [(ngModel)]="project.sampleProcessingProtocol"></quill-editor>
    </div>
  </div>
  <div class="card mt-2">
    <div class="card-body">
      <h5 class="card-title">Data Processing Protocol</h5>
      <quill-editor [(ngModel)]="project.dataProcessingProtocol"></quill-editor>
    </div>
  </div>

  <div class="card mt-2">
    <div class="card-body">
      <h5 class="card-title">Sample Annotation</h5>
      <table class="table table-sm">
        <thead>
        <tr>
          <th scope="col">
            Sample Name
          </th>
          <th scope="col">
            Sample Description
          </th>
          <th scope="col">

          </th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let r of project.sampleAnnotations; let ind = index">
          <td><input class="form-control" [(ngModel)]="project.sampleAnnotations[ind].name"></td>
          <td><textarea class="form-control" [(ngModel)]="project.sampleAnnotations[ind].description"></textarea></td>
          <td><button class="btn btn-sm btn-primary" (click)="removeValue(ind, 'sampleAnnotation')">X</button></td>
        </tr>
        </tbody>
      </table>
    </div>
    <div class="card-footer">
      <button class="btn btn-sm btn-primary" (click)="addSample()">+</button>
    </div>
  </div>
</div>
<div class="modal-footer">
  <button class="btn btn-primary" (click)="update()">Update</button>
  <button class="btn btn-secondary" (click)="modal.dismiss()">Close</button>
</div>
